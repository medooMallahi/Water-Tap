{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nimport { apiCallBegan } from \"./api\";\n\nconst initialState = () => ({\n  data: {},\n  auth: null,\n  cart: []\n});\n\nconst slice = createSlice({\n  name: \"user\",\n  initialState: initialState(),\n  reducers: {\n    userCleared: (state, action) => initialState()\n  }\n});\nconst {\n  userAuthenticated,\n  userCleared,\n  userAuthenticatedFailed,\n  userprofileeUpdated,\n  userAddedToCart,\n  purchaseSucceded\n} = slice.actions;\nexport const registerUser = data => apiCallBegan({\n  url: \"/auth/register\",\n  method: \"post\",\n  data,\n  onSuccess: userAuthenticated.type\n});\nexport const loginUser = data => apiCallBegan({\n  url: \"/auth/signin\",\n  method: \"post\",\n  data,\n  onSuccess: userAuthenticated.type\n});\nexport const userIsAuth = () => dispatch => {\n  try {\n    if (!getTokenCookie()) {\n      throw Error();\n    }\n  } catch (err) {\n    userCleared();\n  }\n\n  dispatch(apiCallBegan({\n    url: \"/auth/isauth\",\n    headers: getAuthHeader(),\n    onSuccess: userAuthenticated.type,\n    onError: userAuthenticatedFailed.type\n  }));\n};\nexport const updateUserProofile = data => apiCallBegan({\n  url: \"/users/profile\",\n  method: \"patch\",\n  data,\n  headers: getAuthHeader(),\n  onSuccess: userprofileeUpdated.type\n});\nexport const updateEmail = data => apiCallBegan({\n  url: \"/users/email\",\n  method: \"patch\",\n  data,\n  headers: getAuthHeader(),\n  onSuccess: userAuthenticated.type\n});\nexport const userSignOut = () => {\n  removeTokenCookie();\n  return userCleared();\n};\nexport const addToCart = item => userAddedToCart({\n  item\n});\nexport const PurchaseSuccess = data => {\n  return apiCallBegan({\n    url: \"/transaction/\",\n    method: \"post\",\n    data,\n    headers: getAuthHeader(),\n    msgOnSuccess: \"Thank you for your purchase\",\n    onSuccess: purchaseSucceded.type\n  });\n};\n_c = PurchaseSuccess;\nexport default slice.reducer;\n\nvar _c;\n\n$RefreshReg$(_c, \"PurchaseSuccess\");","map":{"version":3,"sources":["/Users/mohammedalmallahi/Development/Server/client/src/store/user.js"],"names":["createSlice","apiCallBegan","initialState","data","auth","cart","slice","name","reducers","userCleared","state","action","userAuthenticated","userAuthenticatedFailed","userprofileeUpdated","userAddedToCart","purchaseSucceded","actions","registerUser","url","method","onSuccess","type","loginUser","userIsAuth","dispatch","getTokenCookie","Error","err","headers","getAuthHeader","onError","updateUserProofile","updateEmail","userSignOut","removeTokenCookie","addToCart","item","PurchaseSuccess","msgOnSuccess","reducer"],"mappings":"AAAA,SAASA,WAAT,QAA4B,kBAA5B;AACA,SAASC,YAAT,QAA6B,OAA7B;;AAEA,MAAMC,YAAY,GAAG,OAAO;AAC1BC,EAAAA,IAAI,EAAE,EADoB;AAE1BC,EAAAA,IAAI,EAAE,IAFoB;AAG1BC,EAAAA,IAAI,EAAE;AAHoB,CAAP,CAArB;;AAMA,MAAMC,KAAK,GAAGN,WAAW,CAAC;AACxBO,EAAAA,IAAI,EAAE,MADkB;AAGxBL,EAAAA,YAAY,EAAEA,YAAY,EAHF;AAKxBM,EAAAA,QAAQ,EAAE;AACRC,IAAAA,WAAW,EAAE,CAACC,KAAD,EAAQC,MAAR,KAAmBT,YAAY;AADpC;AALc,CAAD,CAAzB;AAUA,MAAM;AACJU,EAAAA,iBADI;AAEJH,EAAAA,WAFI;AAGJI,EAAAA,uBAHI;AAIJC,EAAAA,mBAJI;AAKJC,EAAAA,eALI;AAMJC,EAAAA;AANI,IAOFV,KAAK,CAACW,OAPV;AASA,OAAO,MAAMC,YAAY,GAAIf,IAAD,IAC1BF,YAAY,CAAC;AACXkB,EAAAA,GAAG,EAAE,gBADM;AAEXC,EAAAA,MAAM,EAAE,MAFG;AAGXjB,EAAAA,IAHW;AAIXkB,EAAAA,SAAS,EAAET,iBAAiB,CAACU;AAJlB,CAAD,CADP;AAQP,OAAO,MAAMC,SAAS,GAAIpB,IAAD,IACvBF,YAAY,CAAC;AACXkB,EAAAA,GAAG,EAAE,cADM;AAEXC,EAAAA,MAAM,EAAE,MAFG;AAGXjB,EAAAA,IAHW;AAIXkB,EAAAA,SAAS,EAAET,iBAAiB,CAACU;AAJlB,CAAD,CADP;AAQP,OAAO,MAAME,UAAU,GAAG,MAAOC,QAAD,IAAc;AAC5C,MAAI;AACF,QAAI,CAACC,cAAc,EAAnB,EAAuB;AACrB,YAAMC,KAAK,EAAX;AACD;AACF,GAJD,CAIE,OAAOC,GAAP,EAAY;AACZnB,IAAAA,WAAW;AACZ;;AAEDgB,EAAAA,QAAQ,CACNxB,YAAY,CAAC;AACXkB,IAAAA,GAAG,EAAE,cADM;AAEXU,IAAAA,OAAO,EAAEC,aAAa,EAFX;AAGXT,IAAAA,SAAS,EAAET,iBAAiB,CAACU,IAHlB;AAIXS,IAAAA,OAAO,EAAElB,uBAAuB,CAACS;AAJtB,GAAD,CADN,CAAR;AAQD,CAjBM;AAmBP,OAAO,MAAMU,kBAAkB,GAAI7B,IAAD,IAChCF,YAAY,CAAC;AACXkB,EAAAA,GAAG,EAAE,gBADM;AAEXC,EAAAA,MAAM,EAAE,OAFG;AAGXjB,EAAAA,IAHW;AAIX0B,EAAAA,OAAO,EAAEC,aAAa,EAJX;AAKXT,EAAAA,SAAS,EAAEP,mBAAmB,CAACQ;AALpB,CAAD,CADP;AASP,OAAO,MAAMW,WAAW,GAAI9B,IAAD,IACzBF,YAAY,CAAC;AACXkB,EAAAA,GAAG,EAAE,cADM;AAEXC,EAAAA,MAAM,EAAE,OAFG;AAGXjB,EAAAA,IAHW;AAIX0B,EAAAA,OAAO,EAAEC,aAAa,EAJX;AAKXT,EAAAA,SAAS,EAAET,iBAAiB,CAACU;AALlB,CAAD,CADP;AASP,OAAO,MAAMY,WAAW,GAAG,MAAM;AAC/BC,EAAAA,iBAAiB;AACjB,SAAO1B,WAAW,EAAlB;AACD,CAHM;AAKP,OAAO,MAAM2B,SAAS,GAAIC,IAAD,IAAUtB,eAAe,CAAC;AAAEsB,EAAAA;AAAF,CAAD,CAA3C;AAEP,OAAO,MAAMC,eAAe,GAAInC,IAAD,IAAU;AACvC,SAAOF,YAAY,CAAC;AAClBkB,IAAAA,GAAG,EAAE,eADa;AAElBC,IAAAA,MAAM,EAAE,MAFU;AAGlBjB,IAAAA,IAHkB;AAIlB0B,IAAAA,OAAO,EAAEC,aAAa,EAJJ;AAKlBS,IAAAA,YAAY,EAAE,6BALI;AAMlBlB,IAAAA,SAAS,EAAEL,gBAAgB,CAACM;AANV,GAAD,CAAnB;AAQD,CATM;KAAMgB,e;AAUb,eAAehC,KAAK,CAACkC,OAArB","sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\nimport { apiCallBegan } from \"./api\";\n\nconst initialState = () => ({\n  data: {},\n  auth: null,\n  cart: [],\n});\n\nconst slice = createSlice({\n  name: \"user\",\n\n  initialState: initialState(),\n\n  reducers: {\n    userCleared: (state, action) => initialState(),\n  },\n});\n\nconst {\n  userAuthenticated,\n  userCleared,\n  userAuthenticatedFailed,\n  userprofileeUpdated,\n  userAddedToCart,\n  purchaseSucceded,\n} = slice.actions;\n\nexport const registerUser = (data) =>\n  apiCallBegan({\n    url: \"/auth/register\",\n    method: \"post\",\n    data,\n    onSuccess: userAuthenticated.type,\n  });\n\nexport const loginUser = (data) =>\n  apiCallBegan({\n    url: \"/auth/signin\",\n    method: \"post\",\n    data,\n    onSuccess: userAuthenticated.type,\n  });\n\nexport const userIsAuth = () => (dispatch) => {\n  try {\n    if (!getTokenCookie()) {\n      throw Error();\n    }\n  } catch (err) {\n    userCleared();\n  }\n\n  dispatch(\n    apiCallBegan({\n      url: \"/auth/isauth\",\n      headers: getAuthHeader(),\n      onSuccess: userAuthenticated.type,\n      onError: userAuthenticatedFailed.type,\n    })\n  );\n};\n\nexport const updateUserProofile = (data) =>\n  apiCallBegan({\n    url: \"/users/profile\",\n    method: \"patch\",\n    data,\n    headers: getAuthHeader(),\n    onSuccess: userprofileeUpdated.type,\n  });\n\nexport const updateEmail = (data) =>\n  apiCallBegan({\n    url: \"/users/email\",\n    method: \"patch\",\n    data,\n    headers: getAuthHeader(),\n    onSuccess: userAuthenticated.type,\n  });\n\nexport const userSignOut = () => {\n  removeTokenCookie();\n  return userCleared();\n};\n\nexport const addToCart = (item) => userAddedToCart({ item });\n\nexport const PurchaseSuccess = (data) => {\n  return apiCallBegan({\n    url: \"/transaction/\",\n    method: \"post\",\n    data,\n    headers: getAuthHeader(),\n    msgOnSuccess: \"Thank you for your purchase\",\n    onSuccess: purchaseSucceded.type,\n  });\n};\nexport default slice.reducer;\n"]},"metadata":{},"sourceType":"module"}