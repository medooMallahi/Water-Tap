{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nimport { apiCallBegan } from \"./api\";\n\nconst initialState = () => ({\n  data: {},\n  auth: null,\n  cart: []\n});\n\nconst slice = createSlice({\n  name: \"user\",\n  initialState: initialState(),\n  reducers: {\n    userAuthenticated: (state, action) => {\n      state.data = action.payload.user;\n      state.auth = true;\n    },\n    userAuthenticatedFailed: (state, action) => {\n      state.data = {};\n      state.auth = false;\n    },\n    userprofileeUpdated: (state, action) => {\n      state.data = action.payload;\n    },\n    userAddedToCart: (state, action) => {\n      state.cart.push(action.payload.item);\n    },\n    purchaseSucceded: (state, action) => {\n      console.log(action.payload, \"Payload\");\n      state.cart = [];\n      state.data.history = action.payload;\n    },\n    userCleared: (state, action) => initialState()\n  }\n});\nconst {\n  userAuthenticated,\n  userCleared,\n  userAuthenticatedFailed,\n  userprofileeUpdated,\n  userAddedToCart,\n  purchaseSucceded\n} = slice.actions;\nexport const registerUser = data => apiCallBegan({\n  url: \"/auth/register\",\n  method: \"post\",\n  data,\n  onSuccess: userAuthenticated.type\n});\nexport const loginUser = data => apiCallBegan({\n  url: \"/auth/signin\",\n  method: \"post\",\n  data,\n  onSuccess: userAuthenticated.type\n});\nexport const userIsAuth = () => dispatch => {\n  try {\n    if (!getTokenCookie()) {\n      throw Error();\n    }\n  } catch (err) {\n    userCleared();\n  }\n\n  dispatch(apiCallBegan({\n    url: \"/auth/isauth\",\n    headers: getAuthHeader(),\n    onSuccess: userAuthenticated.type,\n    onError: userAuthenticatedFailed.type\n  }));\n};\nexport const updateUserProofile = data => apiCallBegan({\n  url: \"/users/profile\",\n  method: \"patch\",\n  data,\n  headers: getAuthHeader(),\n  onSuccess: userprofileeUpdated.type\n});\nexport const updateEmail = data => apiCallBegan({\n  url: \"/users/email\",\n  method: \"patch\",\n  data,\n  headers: getAuthHeader(),\n  onSuccess: userAuthenticated.type\n});\nexport const userSignOut = () => {\n  removeTokenCookie();\n  return userCleared();\n};\nexport const addToCart = item => userAddedToCart({\n  item\n});\nexport const PurchaseSuccess = data => {\n  return apiCallBegan({\n    url: \"/transaction/\",\n    method: \"post\",\n    data,\n    headers: getAuthHeader(),\n    msgOnSuccess: \"Thank you for your purchase\",\n    onSuccess: purchaseSucceded.type\n  });\n};\n_c = PurchaseSuccess;\nexport default slice.reducer;\n\nvar _c;\n\n$RefreshReg$(_c, \"PurchaseSuccess\");","map":{"version":3,"sources":["/Users/mohammedalmallahi/Development/Server/client/src/store/user.js"],"names":["createSlice","apiCallBegan","initialState","data","auth","cart","slice","name","reducers","userAuthenticated","state","action","payload","user","userAuthenticatedFailed","userprofileeUpdated","userAddedToCart","push","item","purchaseSucceded","console","log","history","userCleared","actions","registerUser","url","method","onSuccess","type","loginUser","userIsAuth","dispatch","getTokenCookie","Error","err","headers","getAuthHeader","onError","updateUserProofile","updateEmail","userSignOut","removeTokenCookie","addToCart","PurchaseSuccess","msgOnSuccess","reducer"],"mappings":"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","sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\nimport { apiCallBegan } from \"./api\";\n\nconst initialState = () => ({\n  data: {},\n  auth: null,\n  cart: [],\n});\n\nconst slice = createSlice({\n  name: \"user\",\n\n  initialState: initialState(),\n\n  reducers: {\n    userAuthenticated: (state, action) => {\n      state.data = action.payload.user;\n      state.auth = true;\n    },\n    userAuthenticatedFailed: (state, action) => {\n      state.data = {};\n      state.auth = false;\n    },\n    userprofileeUpdated: (state, action) => {\n      state.data = action.payload;\n    },\n    userAddedToCart: (state, action) => {\n      state.cart.push(action.payload.item);\n    },\n    purchaseSucceded: (state, action) => {\n      console.log(action.payload, \"Payload\");\n      state.cart = [];\n      state.data.history = action.payload;\n    },\n    userCleared: (state, action) => initialState(),\n  },\n});\n\nconst {\n  userAuthenticated,\n  userCleared,\n  userAuthenticatedFailed,\n  userprofileeUpdated,\n  userAddedToCart,\n  purchaseSucceded,\n} = slice.actions;\n\nexport const registerUser = (data) =>\n  apiCallBegan({\n    url: \"/auth/register\",\n    method: \"post\",\n    data,\n    onSuccess: userAuthenticated.type,\n  });\n\nexport const loginUser = (data) =>\n  apiCallBegan({\n    url: \"/auth/signin\",\n    method: \"post\",\n    data,\n    onSuccess: userAuthenticated.type,\n  });\n\nexport const userIsAuth = () => (dispatch) => {\n  try {\n    if (!getTokenCookie()) {\n      throw Error();\n    }\n  } catch (err) {\n    userCleared();\n  }\n\n  dispatch(\n    apiCallBegan({\n      url: \"/auth/isauth\",\n      headers: getAuthHeader(),\n      onSuccess: userAuthenticated.type,\n      onError: userAuthenticatedFailed.type,\n    })\n  );\n};\n\nexport const updateUserProofile = (data) =>\n  apiCallBegan({\n    url: \"/users/profile\",\n    method: \"patch\",\n    data,\n    headers: getAuthHeader(),\n    onSuccess: userprofileeUpdated.type,\n  });\n\nexport const updateEmail = (data) =>\n  apiCallBegan({\n    url: \"/users/email\",\n    method: \"patch\",\n    data,\n    headers: getAuthHeader(),\n    onSuccess: userAuthenticated.type,\n  });\n\nexport const userSignOut = () => {\n  removeTokenCookie();\n  return userCleared();\n};\n\nexport const addToCart = (item) => userAddedToCart({ item });\n\nexport const PurchaseSuccess = (data) => {\n  return apiCallBegan({\n    url: \"/transaction/\",\n    method: \"post\",\n    data,\n    headers: getAuthHeader(),\n    msgOnSuccess: \"Thank you for your purchase\",\n    onSuccess: purchaseSucceded.type,\n  });\n};\nexport default slice.reducer;\n"]},"metadata":{},"sourceType":"module"}